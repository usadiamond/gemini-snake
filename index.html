<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Snake - Example with Firebase</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
      body { font-family: Arial, sans-serif; padding: 20px; }
      #score { font-size: 20px; margin: 10px 0; }
      button { padding: 8px 12px; font-size: 16px; }
    </style>
  </head>
  <body>
    <h1>Snake (example)</h1>

    <!-- Your actual game page would replace or integrate with this demo block -->
    <div id="score">Score: <span id="value">0</span></div>
    <button id="increase">Increase score</button>
    <button id="send">Send score to Firebase</button>
    <div id="status"></div>

    <!-- Firebase SDKs from CDN for simple usage (no npm needed) -->
    <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-firestore-compat.js"></script>

    <!-- Put your Firebase project values into public/firebase-init.js -->
    <script src="/firebase-init.js"></script>

    <script>
      if (!window.firebaseConfig) {
        document.getElementById('status').innerText = 'firebase-init.js not configured yet';
      } else {
        firebase.initializeApp(window.firebaseConfig);
        const db = firebase.firestore();

        let current = 0;
        const valueEl = document.getElementById('value');
        document.getElementById('increase').addEventListener('click', () => {
          current += 10;
          valueEl.innerText = current;
        });

        document.getElementById('send').addEventListener('click', async () => {
          document.getElementById('status').innerText = 'Sending...';
          try {
            const player = 'Anonymous'; // later replace with real player name
            const score = current;
            const docRef = await db.collection('scores').add({
              player,
              score,
              createdAt: firebase.firestore.FieldValue.serverTimestamp()
            });
            document.getElementById('status').innerText = 'Saved with id: ' + docRef.id;
          } catch (err) {
            console.error(err);
            document.getElementById('status').innerText = 'Error: ' + err.message;
          }
        });
      }
    </script>
  </body>
</html>
